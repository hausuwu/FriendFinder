<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://bootswatch.com/flatly/bootstrap.min.css">

</head>
<body>

    <div class="container">

        <h2>Survey Questions</h2>
        <hr>
        <h3>
            <strong>About You</strong>
        </h3>
        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required>
        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required>
        <hr>
        <!-- QUESTION 1 -->
        <h3>
            <strong>Questions 1</strong>
        </h3>
        <h4>Unity through strength.</h4>
        <select class="chosen-select" id="q1" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 2 -->
        <h3>
            <strong>Questions 2</strong>
        </h3>
        <h4>Enemies are best dealt with from afar.</h4>
        <select class="chosen-select" id="q2" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 3 -->
        <h3>
            <strong>Questions 3</strong>
        </h3>
        <h4>Technology is Power.</h4>
        <select class="chosen-select" id="q3" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 4 -->
        <h3>
            <strong>Questions 4</strong>
        </h3>
        <h4>Fear is your greatest ally.</h4>
        <select class="chosen-select" id="q4" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 5 -->
        <h3>
            <strong>Questions 5</strong>
        </h3>
        <h4>Obey the chorus of the warp</h4>
        <select class="chosen-select" id="q5" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 6 -->
        <h3>
            <strong>Questions 6</strong>
        </h3>
        <h4>Every mind is a fortress best kept guarded.</h4>
        <select class="chosen-select" id="q6" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 7 -->
        <h3>
            <strong>Questions 7</strong>
        </h3>
        <h4>Martial prowess before all else.</h4>
        <select class="chosen-select" id="q7" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 8 -->
        <h3>
            <strong>Questions 8</strong>
        </h3>
        <h4>A blow placed in the correct spot will bring any enemy to heel</h4>
        <select class="chosen-select" id="q8" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 9 -->
        <h3>
            <strong>Questions 9</strong>
        </h3>
        <h4>Any engagement can be won by applying force directly</h4>
        <select class="chosen-select" id="q9" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- QUESTION 10 -->
        <h3>
            <strong>Questions 10</strong>
        </h3>
        <h4>Victory is determined solely by numbers</h4>
        <select class="chosen-select" id="q10" style="display: none,">
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
        </select>
        <!-- SUBMIT -->
        <div class="text-center">
            <button id="submitBtn" type="submit" class="btn btn-success btn-lg">Submit</button>
        </div>
        <!-- MODAL -->
        <div id="Match-Modal" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h3 class="modal-title">Your New Best Friend</h1>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img id="match-photo" src="">
                </div>
                <div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
            </div>
        </div>

    <!-- container end -->
    </div>
    <!-- footer -->
    <footer class="footer">
            <div class="container">
              <p><a href="/api/friends">API Friends List</a> | <a href="">GitHub Repo</a>
            </div>
    </footer>
    
</body>

</html>

<script type="text/javascript">

    $("#submitBtn").on("click", function(event) {
        event.preventDefault();

        // grab form elements
        var newFriend = {
            name: $("#name").val().trim(),
            photo: $("#photo").val().trim(),
            scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val(),
            ]
           
        };

        // send data to the server
        // server will calculate most related friend and send back an object

        console.log(newFriend);
        $.post("api/friends", newFriend, function(res){
            console.log(res);
            // show modal
            $("Match-Modal").modal("show");
            // add response to the modal
            $("#match-name").text(res.name);
            $("#match-image").attr("src", res.photo);

        });

    });


</script>